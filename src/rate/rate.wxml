<wxs src="./rate.wxs" module="this"></wxs>

<view class="{{classPrefix}} ctn-class {{classPrefix}}-{{value}}">
  <block wx:for="{{this.getStarList(count)}}" wx:key="*this">
    <!-- 缺省值，目前没有找到判断是否有传递slot的方式，先harcode为true -->
    <image
      wx:if="{{true}}"
      class="star-class {{this.getIconClass(readonly)}}"
      style="width:{{size}};height:{{size}};"
      src="{{this.getIcon(value, item)}}"
      mode="aspectFit"
      data-val="{{item}}"
      catchtap="changeVal"
      catchlongpress="clearVal"
    />
    <!-- 依赖t-icon -->
    <view
      wx:else
      class="star-class {{this.getIconClass(readonly)}}"
      data-val="{{item}}"
      catchtap="changeVal"
      catchlongpress="clearVal"
    >
      <!--选中态-->
      <slot wx:if="{{value >= item}}" name="active-icon"></slot>
      <!--默认态-->
      <slot wx:else name="default-icon"></slot>
    </view>
  </block>
  <view wx:if="{{showText}}" class="{{classPrefix}}-text" style="color: {{textColor}};">
    {{texts[value - 1]}}
  </view>
</view>
