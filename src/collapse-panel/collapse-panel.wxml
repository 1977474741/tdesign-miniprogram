<wxs module="getType">
  function isArray(array) { return array && array.constructor === 'Array'; } function isObject(obj)
  { return obj && obj.constructor === 'Object'; } module.exports.isArray = isArray;
  module.exports.isObject = isObject;
</wxs>

<view class="t-collapse-panel custom-class {{ index !== 0 ? 't-hairline--top' : '' }}">
  <t-cell
    title="{{ title }}"
    title-class="title-class"
    icon="{{ icon }}"
    value="{{ extra }}"
    label="{{ label }}"
    is-link="{{ isLink }}"
    clickable="{{ clickable }}"
    border="{{ border && expanded }}"
    class="t-collapse-panel__title {{disabled?'t-collapse-panel__title--disabled':''}} {{expanded?'t-collapse-panel__title--expanded':''}}"
    right-icon-class="t-cell__right-icon"
    custom-class="t-cell"
    hover-class="t-cell--hover"
    bind:click="onClick"
  >
    <slot name="title" slot="title" />
    <slot name="icon" slot="icon" />
    <slot name="extra" />
    <slot name="right-icon" slot="right-icon" />
  </t-cell>
  <view
    class="t-collapse-panel__wrapper {{transition?'t-collapse-panel__title--transition':''}}"
    style="height: {{ contentHeight }};"
    bind:transitionend="onTransitionEnd"
  >
    <view class="t-collapse-panel__content content-class">
      <view class="collapse-panel-item" wx:if="{{content && getType.isArray(content)}}">
        <view
          wx:for="{{content}}"
          class="collapse-panel-item-container"
          wx:key="index"
          wx:for-index="index"
        >
          <block wx:if="{{getType.isObject(item)}}">
            <view class="panel-label" style="{{labelWidth ? 'width:' + labelWidth + 'rpx' : ''}}">
              {{item.label}}
            </view>
            <view class="panel-content"> {{item.content}}</view>
          </block>
          <block wx:else>
            <view class="panel-content"> {{item}}</view>
          </block>
        </view>
      </view>
      <view class="collapse-panel-single-item" wx:if="{{content && !getType.isArray(content)}}">
        {{content}}
      </view>
      <block wx:else>
        <slot />
      </block>
    </view>
  </view>
</view>
